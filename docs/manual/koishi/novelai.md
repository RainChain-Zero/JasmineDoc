---
category:
  - 使用指南
  - Koishi
tag:
  - 制图
---

# NovelAi 作图

> _快看快看！这是茉莉这几天的——新！成！果！怎么样，是不是比以前有进步了？_

这里是对[NovelAi](https://novelai.net/)作图功能的 bot 实现。

凭着好奇心和~~吃瓜精神~~，咱第一时间完成了 NovelAi 的实现，后来发现 Koishi 官方~~更是凶猛 ×~~，所以我选择加入他！(？)

:::warning 注意

1. 此功能处于内测阶段，仅对开发群开放，随时可能修改~~或跑路~~。

2. 限制全局频率为 30s 一次。

:::danger 下划线
请不要在关键词中间加上**下划线**！这可能导致未知错误！
:::

### 绘制图片

输入`/nai [关键词]`进行图片绘制。关键词需要为**英文**，多个关键词之间**用逗号分隔**。例如：

```
/nai white hair,red eyes
```

:::info 提示
关键词描述可以参阅群文件《AI 的魔法~~禁书目录~~咒语》，已在代码层面禁用部分破碎肢体和低质量的作画。
:::

### 切换生成模型

可以用 `-m` 或 `--model` 参数切换生成模型，可选值包括：

- `safe`：较安全的图片
- `nai`：自由度较高的图片 (默认)
- `furry`：福瑞控特攻

```
/nai white hair,red eyes -m furry
```

### 更改图片方向

可以用 `-o` 或 `--orient` 更改图片方向，可选值包括：

- `portrait`：768×512 (默认)
- `square`：640×640
- `landscape`：512×768

```
/nai white hair,red eyes -o landscape
```

### 设置采样器

可以用 `-s` 或 `--sampler` 设置采样器，可选值包括：

- `k_euler_ancestral` (默认)
- `k_euler`
- `k_lms`
- `plms`
- `ddim`

一般推荐使用 `k_euler_ancestral`，不建议修改

### 调整影响因子

使用**半角方括号** `[]` 包裹关键词以**弱化**该关键词的影响，使用**半角花括号** `{}` 包裹关键词以**强化**该关键词的影响。例如：

```
/nai {white hair},[red eyes]
```

:::info 提示
`[]`和`{}`可以**嵌套**，每一层都将增加/减弱 1.05 倍的权重。
:::

### 要素混合

使用 `|` 分隔多个关键词以混合多个要素。例如：

```
/nai cat | frog
```

:::info 提示
可以进一步在关键词后添加 :x 来指定单个关键词的权重，x 的取值范围是 0.1~100，默认为 1。
:::

> /nai cat :2 | frog

你将得到一只缝合怪 (字面意义上)。

### 随机种子

使用`-x` 或 `-- seed` 参数来设定随机种子。随机种子在生成过程中起到*噪声*的作用，有**相同随机种子**的画拥有**更多的相似处**。（不是相同）

默认随机种子为对当前时间戳四舍五入。

```
/nai white hair,red eyes -x 20060228
```

### 服从度

使用`-c` 或 `-- scale` 参数来调整 AI 的服从度。服从度越低 AI 自由发挥的空间越大，越高则更服从于用户输入。默认 12。

| scale |          效果          |
| :---: | :--------------------: |
|  2~8  |   自由创作，智械危机   |
| 9~13  | 略微修改输入，加点私货 |
| 14~18 |   乖巧绘画，少有改动   |
|  19~  |     无情的绘画机器     |

```
/nai white hair,red eyes -c 15
```

### 特别感谢

- [NovelAi](https://novelai.net/)

- [ koishijs/koishi-plugin-novelai](https://github.com/koishijs/koishi-plugin-novelai)
