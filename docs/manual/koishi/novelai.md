---
category:
  - 使用指南
  - Koishi
tag:
  - 制图
---

# NovelAi 作图

> _快看快看！这是茉莉这几天的——新！成！果！怎么样，是不是比以前有进步了？_

这里是对[NovelAi](https://novelai.net/)作图功能的 bot 实现。

凭着好奇心和~~吃瓜精神~~，咱第一时间完成了 NovelAi 的实现，后来发现 Koishi 官方~~更是凶猛 ×~~，所以我选择加入他！(？)

:::warning 注意

1. 此功能处于内测阶段，仅对开发群开放，随时可能修改~~或跑路~~。

2. 当前仅允许同时处理一张图片。
   :::

### 绘制图片

输入`/nai [关键词]`进行图片绘制。关键词需要为**英文**，多个关键词之间**用逗号分隔**。例如：

```
/nai white hair,red eyes
```

:::info 提示
关键词描述可以参阅群文件《AI 的魔法~~禁书目录~~咒语》，已在代码层面禁用部分破碎肢体和低质量的作画。
:::

### 以图绘图（img2img）

在指令中带上图片即可，将按照原图和词条进行绘图。

```
/nai 词条...[图片]
```

### 更改图片大小

可以用`-w` 和 `-h` 指定生成图片的宽度和高度。（默认 512\*768）

```
/nai -w 512 -h 768 词条...
```

### 调整影响因子

使用**半角方括号** `[]` 包裹关键词以**弱化**该关键词的影响，使用**半角花括号** `{}` 包裹关键词以**强化**该关键词的影响。例如：

```
/nai {white hair},[red eyes]
```

可以使用**negative prompts:** 指定待排除的词条。

```
/nai {white hair},[red eyes]
negative prompts: missing legs
```

:::info 提示
`[]`和`{}`可以**嵌套**，每一层都将增加/减弱 1.05 倍的权重。
:::

### 要素混合

使用 `|` 分隔多个关键词以混合多个要素。例如：

```
/nai cat | frog
```

:::info 提示
可以进一步在关键词后添加 :x 来指定单个关键词的权重，x 的取值范围是 0.1~100，默认为 1。
:::

> /nai cat :2 | frog

你将得到一只缝合怪 (字面意义上)。

### 随机种子

使用`-x` 参数来设定随机种子。随机种子在生成过程中起到*噪声*的作用，有**相同随机种子**的画拥有**更多的相似处**。（不是相同）

默认随机种子为对当前时间戳四舍五入。

```
/nai -x 20060228 white hair,red eyes
```

### 服从度

使用`-c` 参数来调整 AI 的服从度。服从度越低 AI 自由发挥的空间越大，越高则更服从于用户输入。默认 12。

| scale |          效果          |
| :---: | :--------------------: |
|  2~8  |   自由创作，智械危机   |
| 9~13  | 略微修改输入，加点私货 |
| 14~18 |   乖巧绘画，少有改动   |
|  19~  |     无情的绘画机器     |

```
/nai -c 15 white hair,red eyes
```

### 特别感谢

- [NovelAi](https://novelai.net/)

- [ koishijs/koishi-plugin-novelai](https://github.com/koishijs/koishi-plugin-novelai)
